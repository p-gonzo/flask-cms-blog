{% extends "base.html" %}

{% block extra_scripts %}
<script>
setTimeout(() => {
  var postsCreated = [ ...document.getElementsByClassName('post-created-utc-string')];
  postsCreated.forEach(date => {
    date.innerHTML = moment.utc(date.innerHTML).local().calendar(); //moment.utc(date.innerHTML).local().format('MMMM Do YYYY, h:mm:ss a');
  });
}, 0);
</script>
{% endblock extra_scripts %}

{% block title %}Blog entries{% endblock %}

{% block content_title %}Blog entries{% endblock %}

{% block content %}
  {% for post in entries %}
    <a class="post-index-overview" href="{% if post.published %}{{ url_for('detail', slug=post.slug) }}{% else %}{{ url_for('edit', slug=post.slug) }}{% endif %}">
        <div class="title-and-date">
          <h3>
            {{ post.title }}
          </h3>
          <p class="post-created-utc-string">{{ post.created }}</p>
        </div>
        <div class="post-preview">
          <p> {{ post.html_content|striptags|truncate(500) }}</p>
        </div>
    </a>
  {% else %}
    <p>No entries have been created yet.</p>
  {% endfor %}
{% endblock %}
